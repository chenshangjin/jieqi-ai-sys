[TOC]

# 揭棋AI（AI算法+Windows界面+安卓客户端）[参考](https://github.com/miaosiSari/Jieqi)

这个项目的整体思路：

我们在安卓手机上的天天象棋里下揭棋时，当轮到我们走棋时，将画面传到服务器，服务器识别到当前的棋子分布和已经吃掉的棋子，计算出当前最佳着法，发送到安卓手机。也就是我们就可以用AI的能力作弊。

## 0.环境搭建

1. 创建python虚拟环境

`conda create -n jieqi python=3.12`

2. 激活虚拟环境

`conda activate jieqi`

## 1.AI算法

`python musesfish_pvs_v2_fixed.py`

目前看起来，程序启动后会初始化暗子到明子的映射。玩家先走，AI后走。

走法：如炮二平五，需要输入h2e2

如果要支持在安卓客户端使用，有以下改动点需要完成：

### TODO：

- [ ] 不进行暗子到明子的初始化映射，而是根据天天象棋的翻子来逐步增加此映射关系
- [ ] 需要支持玩家先走或后走
- [ ] 图像识别算法，需要支持识别天天象棋的截图，识别出各个棋子的位置，已经被吃掉的棋子

## 2.Windows界面

1. 安装pygame

`pip install pygame`

2. 运行gui.py

`python gui.py`

程序启动时，会在子程序运行AI算法，通过读取AI算法返回的棋盘布局文本，显示在pygame的UI上面。但是目前看起来问题较多。比如红黑棋子颜色显示错误、界面卡住等。

### 问题1（未解决）：`import readline`导入readline模块失败，并且安装失败

实际上readline模块没有使用到，暂时注释掉

### 问题2（未解决）：经常下两步就卡住，待定位

## 3.安卓客户端

### TODO：

**半自动版本**：需要带一个按钮和一个文本框，启动时悬浮在天天象棋之上，点击按钮时，截取屏幕并上传服务器，服务器返回的文本数据显示在文本框中

**全自动版本**

- [ ] 支持自动截图或视频流
- [ ] 支持识别棋局状态
- [ ] 支持自动走棋
